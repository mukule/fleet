{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Topstar car hire - Vehicle Inspection Form</title>
    <link rel="shortcut icon" href="https://topstarcarhire.co.ke/img/topstar.png" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'dashboard/css/bootstrap.min.css' %}" type="text/css">
    <link rel="stylesheet" href="{% static 'inspection/css/style.css' %}" type="text/css">
   
</head>
<body>
    <div class="container">
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <!-- Use the "bg-dark" class for a dark background -->
                    <img src="{% static 'inspection/images/banner.png' %}" class="card-img w-100" alt="form-banner">
                    <div class="card-img-overlay text-center">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="card card-form border-0 shadow-sm">
                    <div class="form mt-2">
                        <form method="post" enctype="multipart/form-data" class="form-horizontal">
                            {% csrf_token %}
                            <div class="fomr-row">
                              {% if form.errors %}
                                  <div class="alert alert-danger">
                                      <strong>Error!</strong> Please correct the errors below.
                                  </div>
                              {% endif %}
                             
                              {% for field in form %}
                                  {% if field.errors %}
                                  <hr>
                                      <div class="alert alert-danger">
                                        {{ field.name|capfirst }}: {{ field.errors|striptags }}
                                      </div>
                                      <hr>
                                  {% endif %}
                              {% endfor %}
                             
                            </div>
                            <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Date
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.date|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Vehile
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.car|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Current Mileage
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.current_mileage|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Service Tag
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.service_tag|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Next Service Due
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.next_service_due|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Insurance Expiry
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.insurance_expiry|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Fuel Tank Level
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  <small><span id="fuelTankValue" class="mt-0 text-info">{{ form.initial.fuel_tank_level|default:50 }}</span></small>
                                  {{ form.fuel_tank_level|as_crispy_field }}
                                  
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Emergency Equipment
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                 
                                  {{ form.emergency_equipment|as_crispy_field }}
                                </div>
                              
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-12 mb-0">
                                  <hr>
                                </div>
                              </div>
                              
                              <h2>Essential Fluids</h2>
                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Oil Level
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.oil_level|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Brake Fluid
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.brake_fluid|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Power Steering Fluid
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.power_steering_fluid|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Clutch Fluid
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.clutch_fluid|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Auto Transmission Fluid
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.auto_transmission_fluid|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Radiator Fluid Level
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.radiator_fluid_level|as_crispy_field }}
                                </div>
                              </div>

                              <div class="form-row">
                                <div class="form-group col-md-6">
                                  Windshield Washer Level
                                </div>
                                <div class="form-group col-md-6">
                                  {{ form.windshield_washer_level|as_crispy_field }}
                                </div>
                              </div>
                              <hr>
                              <h2>Battery conditions</h2>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                Voltage Recorded
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.voltage_recorded|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Terminals Checked and Tightened
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.terminals_checked_and_tightened|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Battery Fluid
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.battery_fluid|as_crispy_field }}
                                </div>
                              </div>
                              <hr>
                              <h2>Vehicle Electrics</h2>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Headlights Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.headlights_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  High Beam Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.high_beam_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Break Lights Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.brake_lights_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Indicators Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.indicators_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Reverse Lights Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.reverse_lights_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Fog Lights Working
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.fog_lights_working|as_crispy_field }}
                                </div>
                              </div>
                              <hr>
                              <h2>Tyres Conditions</h2>

                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Tyre Brand & Condition
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                <div class="row">
                                  <div class="col-md-6">
                                    {{ form.fr_tire_brand|as_crispy_field }}
                                  </div>
                                  <div class="col-md-6">
                                    {{ form.fr_tire_condition|as_crispy_field }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    {{ form.fl_tire_brand|as_crispy_field }}
                                  </div>
                                  <div class="col-md-6">
                                    {{ form.fl_tire_condition|as_crispy_field }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    {{ form.rr_tire_brand|as_crispy_field }}
                                  </div>
                                  <div class="col-md-6">
                                    {{ form.rr_tire_condition|as_crispy_field }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    {{ form.rl_tire_brand|as_crispy_field }}
                                  </div>
                                  <div class="col-md-6">
                                    {{ form.rl_tire_condition|as_crispy_field }}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    {{ form.spare_tire_brand|as_crispy_field }}
                                  </div>
                                  <div class="col-md-6">
                                    {{ form.spare_tire_condition|as_crispy_field }}
                                  </div>
                                </div>
                                
                                </div>
                              </div>
                            
                              <hr>
                              <h2>Internal</h2>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Warning Lights on Dashboard
                                </div>
                                <div class="form-group col-md-6 mb-2">
                                  {{ form.warning_lights|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Air Conditioning Working
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.air_conditioning_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Radio Working
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.radio_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Radio Options
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                <div class="row">
                                  <div class="col-md-6">
                                    <div class="row">
                                      <div class="col-md-6">
                                        CD
                                      </div>
                                      <div class="col-md-6">
                                        {{ form.CD|as_crispy_field }}
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="row">
                                      <div class="col-md-6">
                                        USB
                                      </div>
                                      <div class="col-md-6">
                                        {{ form.USB|as_crispy_field }}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-md-6">
                                    <div class="row">
                                      <div class="col-md-6">
                                        AUX
                                      </div>
                                      <div class="col-md-6">
                                        {{ form.AUX|as_crispy_field }}
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="row">
                                      <div class="col-md-6">
                                        FM Expander
                                      </div>
                                      <div class="col-md-6">
                                        {{ form.FM_Expander|as_crispy_field }}
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Windscreen (Any Chips or Cracks?)
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.windscreen_condition|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Wipers in Good Working Order
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.wipers_working|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Seat Belts All Functioning
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.seat_belts_functioning|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Electric Mirrors Functioning and No Cracks
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.electric_mirrors_functioning|as_crispy_field }}
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Electric Windows Functioning
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  {{ form.electric_windows_functioning|as_crispy_field }}
                                </div>
                              </div>
                              <hr>

                              <div class="form-row">
                                <div class="form-group col-md-6 mb-0">
                                  Driver
                                </div>
                                <div class="form-group col-md-6 mb-0">
                                  <div class="row">
                                    <div class="col-md-6">
                                      {{ form.first_name|as_crispy_field }}
                                    </div>
                                    <div class="col-md-6">
                                      {{ form.last_name|as_crispy_field }}
                                    </div>
                                  </div>
                                 
                                  
                                  </div>
                                </div>
                                <hr>
                                <div class="form-row">
                                  <div class="form-group col-md-6 mb-0">
                                    Inspector
                                  </div>
                                  <div class="form-group col-md-6 mb-0">
                                    <div class="row">
                                      <div class="col-md-6">
                                        {{ form.inspectors_first_name|as_crispy_field }}
                                      </div>
                                      <div class="col-md-6">
                                        {{ form.inspectors_last_name|as_crispy_field }}
                                      </div>
                                    </div> 
                                    </div>
                                  </div>
                                  <div class="form-row">
                                    <div class="form-group col-md-6 mb-0">
                                      Additional Comments
                                    </div>
                                    <div class="form-group col-md-6 mb-0">
                                      {{ form.additional_comments|as_crispy_field }}
                                      </div>
                                    </div>

                                    <div class="form-row">
                                      <div class="form-group col-md-6 mb-0">
                                        Dashboard Image (Fuel & Mileage)
                                      </div>
                                      <div class="form-group col-md-6 mb-0">
                                        {{ form.dashboard_image|as_crispy_field }}
                                        </div>
                                      </div>

                                      <div class="form-row">
                                        <div class="form-group col-md-6 mb-0">
                                          Car Damage Images
                                        </div>
                                        <div class="form-group col-md-6 mb-0" id="fileInputsContainer">
                                          {{ form.car_damage_images|as_crispy_field }}
                                          </div>
                                        </div>
                                        <div class="form-row text-center">
                                          <div class="form-group col-md-12">
                                              <button type="button" class="btn btn-primary btn-lg" onclick="addFileInput()">Add Other Damage Image</button>
                                          </div>
                                      </div>

                              </div>
                              <hr>
                            <div class="form-row text-center">
                              <div class="form-group col-md-12">
                                <button class="btn btn-primary btn-lg" type="submit">Submit </button>
                              </div>
                            </div>
                          </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    
    <script>
      // Get the range input and the span
      var fuelTankSlider = document.getElementById('fuelTankSlider');
      var fuelTankValue = document.getElementById('fuelTankValue');
  
      // Add an input event listener to update the span
      if (fuelTankSlider) {
          fuelTankSlider.addEventListener('input', function() {
              fuelTankValue.innerText = this.value;
          });
      }
  </script>

<script>
  function addFileInput() {
      var container = document.getElementById('fileInputsContainer');
      var input = document.createElement('input');
      input.type = 'file';
      input.name = 'car_damage_images';  
      input.className = 'form-control';
      input.multiple = true;

      var br = document.createElement('br');

      container.appendChild(input);
      container.appendChild(br);
  }
</script>

<!-- Add this script after the Bootstrap script -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      // Get the Service Tag and Current Mileage input elements
      var serviceTagInput = document.getElementById('service_tag');
      var currentMileageInput = document.getElementById('current_mileage');
      var nextServiceDueInput = document.getElementById('next_service_due');

      // Add input event listeners to trigger the calculation
      if (serviceTagInput && currentMileageInput && nextServiceDueInput) {
          serviceTagInput.addEventListener('input', calculateNextServiceDue);
          currentMileageInput.addEventListener('input', calculateNextServiceDue);
      }

      // Function to calculate and update Next Service Due
      function calculateNextServiceDue() {
          var serviceTagValue = parseFloat(serviceTagInput.value) || 0;
          var currentMileageValue = parseFloat(currentMileageInput.value) || 0;

          // Perform the calculation (you can customize this logic)
          var nextServiceDueValue = serviceTagValue - currentMileageValue;

          // Log values to the console for debugging
          console.log('Service Tag:', serviceTagValue);
          console.log('Current Mileage:', currentMileageValue);
          console.log('Next Service Due:', nextServiceDueValue);

          // Update the Next Service Due input field
          nextServiceDueInput.value = nextServiceDueValue.toFixed(2); // Adjust decimal places as needed
      }
  });
</script>




    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
